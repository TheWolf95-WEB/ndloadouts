<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>NDHQ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/static/css/style.css?v={{ version }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <div class="container">
    
    {% include "screens/home.html" %}
    {% include "screens/warzone.html" %}
    {% include "screens/battlefield.html" %}
    {% include "screens/fortnite.html" %}
    {% include "screens/news.html" %}

  </div>


  <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
  <script src="/static/analytics.js?v={{ version }}"></script>
  <script src="/static/app.js?v={{ version }}"></script>
  <script>
(() => {
  const EDGE_ZONE = 40;  // активная зона у левого края
  const TRIGGER = 80;    // длина свайпа для срабатывания

  let startX = 0;
  let startY = 0;
  let deltaX = 0;
  let deltaY = 0;
  let touching = false;

  document.addEventListener('touchstart', (e) => {
    if (e.touches.length !== 1) return;
    const t = e.touches[0];
    if (t.clientX > EDGE_ZONE) return; // только от левого края
    startX = t.clientX;
    startY = t.clientY;
    touching = true;
  }, { passive: true });

  document.addEventListener('touchmove', (e) => {
    if (!touching) return;
    const t = e.touches[0];
    deltaX = t.clientX - startX;
    deltaY = t.clientY - startY;
    // если больше двигается по вертикали — отменяем
    if (Math.abs(deltaY) > Math.abs(deltaX)) touching = false;
  }, { passive: true });

  document.addEventListener('touchend', () => {
    if (!touching) return;
    touching = false;
    if (deltaX > TRIGGER) {
      const active = document.querySelector('.screen.active');
      if (active && active.id !== 'screen-home') {
        const prevId = window.screenHistory?.[window.screenHistory.length - 1];
        if (prevId && typeof window.showScreen === 'function') {
          window.isGoingBack = true;
          window.showScreen(prevId);

          // небольшая вибрация для фидбэка
          if (navigator.vibrate) navigator.vibrate(15);
          try {
            Telegram.WebApp.HapticFeedback.impactOccurred('light');
          } catch {}
        }
      }
    }
    // сбрасываем
    deltaX = deltaY = 0;
  }, { passive: true });

  console.log("✅ NDHQ SwipeBack v1.0 initialized");
})();
</script>




</body>
</html>


<!--  -->
