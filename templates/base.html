<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>NDHQ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/static/css/style.css?v={{ version }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <div class="container">
    
    {% include "screens/home.html" %}
    {% include "screens/warzone.html" %}
    {% include "screens/battlefield.html" %}
    {% include "screens/fortnite.html" %}
    {% include "screens/news.html" %}

  </div>


  <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
  <script src="/static/analytics.js?v={{ version }}"></script>
  <script src="/static/app.js?v={{ version }}"></script>
  <script src="/static/bf.js?v={{ version }}"></script>


  <script>
  (() => {
    let startX = 0;
    let startY = 0;
    let deltaX = 0;
    let deltaY = 0;
    let isTouching = false;
    const EDGE_ZONE = 40;   // ширина зоны от края
    const TRIGGER = 80;     // минимальное расстояние свайпа
  
    document.addEventListener("touchstart", (e) => {
      if (e.touches.length !== 1) return;
      const t = e.touches[0];
      if (t.clientX > EDGE_ZONE) return; // только с левого края
      startX = t.clientX;
      startY = t.clientY;
      deltaX = deltaY = 0;
      isTouching = true;
    }, { passive: true });
  
    document.addEventListener("touchmove", (e) => {
      if (!isTouching) return;
      const t = e.touches[0];
      deltaX = t.clientX - startX;
      deltaY = t.clientY - startY;
      if (Math.abs(deltaY) > Math.abs(deltaX)) {
        // если больше движение по вертикали — отменяем
        isTouching = false;
        return;
      }
    }, { passive: true });
  
    document.addEventListener("touchend", () => {
      if (!isTouching) return;
      isTouching = false;
      if (deltaX > TRIGGER) {
        const active = document.querySelector(".screen.active");
        if (active && active.id !== "screen-home") {
          const prevId = window.screenHistory?.[window.screenHistory.length - 1];
          if (prevId && typeof window.showScreen === "function") {
            window.isGoingBack = true;
            window.showScreen(prevId);
            // Вибрация для ощущения
            if (navigator.vibrate) navigator.vibrate(15);
          }
        }
      }
    }, { passive: true });
  
    console.log("✅ NDHQ Minimal Swipe active");
  })();
  </script>


</body>
</html>


<!--  -->
